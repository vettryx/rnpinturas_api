{# templates/includes/apps_home.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock title %}
{% block body_class %}body-apps-home{% endblock body_class %}
{% block header_title %}{{ title }}{% endblock header_title %}

{% block content %}

<div class="container-apps-home">
    
    {# --- SEÇÃO 1: KPIs (Indicadores) --- #}
    {% if kpis %}
    <div class="dashboard-kpi-grid">
        {% for kpi in kpis %}
            <div class="kpi-card {{ kpi.style|default:'' }}">
                <div class="kpi-header">
                    <span class="kpi-label">{{ kpi.label }}</span>
                    {% if kpi.icon %}
                        <i class="{{ kpi.icon }} kpi-icon"></i>
                    {% endif %}
                </div>
                <div class="kpi-body">
                    <span class="kpi-value">{{ kpi.value }}</span>
                </div>
                {% if kpi.footer %}
                <div class="kpi-footer">
                    {{ kpi.footer }}
                </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    {% endif %}

    {# --- SEÇÃO 2: ÁREA PRINCIPAL (Ações e Recentes) --- #}
    <div class="dashboard-main-grid">
        
        {# COLUNA ESQUERDA: Ações Rápidas #}
        <div class="apps-home-card actions-card">
            <div class="card-header">
                <h3>Ações Rápidas</h3>
            </div>
            <div class="card-body">
                <div class="dashboard-actions-group">
                    {% if actions_list %}
                        {% for action in actions_list %}
                            <a href="{{ action.url }}" class="{{ action.class }} dashboard-btn" aria-label="{{ action.label }}">
                                {# Lógica visual de ícones baseada na classe #}
                                {% if 'btn-new' in action.class %}
                                    <i class="fas fa-plus"></i>
                                {% elif 'btn-list' in action.class %}
                                    <i class="fas fa-list"></i>
                                {% else %}
                                    <i class="fas fa-chevron-right"></i>
                                {% endif %}
                                {{ action.label }}
                            </a>
                        {% endfor %}
                    {% else %}
                        <p class="empty-state">Nenhuma ação definida.</p>
                    {% endif %}
                </div>
            </div>
        </div>

        {# COLUNA DIREITA: Recentes #}
        {% if recent_items %}
        <div class="apps-home-card recent-card">
            <div class="card-header">
                <h3>Adicionados Recentemente</h3>
            </div>
            <div class="card-body no-padding">
                <div class="recent-list">
                    {% for item in recent_items %}
                        <div class="recent-item">
                            <div class="recent-info">
                                <a href="{{ item.url }}" class="recent-link">{{ item.label }}</a>
                                <span class="recent-meta">{{ item.meta }}</span>
                            </div>
                            <div class="recent-action">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
        
    </div>
</div>

{% endblock content %}
