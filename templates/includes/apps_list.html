{# templates/includes/apps_list.html #}

{% extends "base.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock title %}
{% block body_class %}body-apps-list{% endblock body_class %}
{% block header_title %}{{ title }}{% endblock header_title %}

{% block content %}
<div class="container-apps-list">

    <aside class="apps-list-sidebar">
        
        <div class="apps-list-actions-card">
            {% for btn in header_buttons %}
                <a class="{{ btn.class }}" href="{{ btn.url }}">
                    {% if btn.icon %}<i class="{{ btn.icon }}"></i>{% endif %} {{ btn.label }}
                </a>
            {% endfor %}
        </div>

        {# Só renderiza o formulário se houver campos de busca configurados na View #}
        {% if search_fields %}
        <form method="get" action="{{ request.path }}" class="apps-list-search-form" id="search-form">
            <div class="apps-list-search-header">
                <h3><i class="fas fa-filter"></i> Filtrar Dados</h3>
            </div>

            {% include "includes/search_fields.html" %}
            
            <div class="apps-list-btn-group-search">
                {% for action in search_actions %}
                    {% if action.type == 'submit' %}
                        {# Botão de Submissão (Buscar) #}
                        <button type="submit" class="{{ action.class }}">
                            {% if action.icon %}<i class="{{ action.icon }}"></i>{% endif %} {{ action.label }}
                        </button>
                    {% elif action.type == 'clear' %}
                        {# Botão de Limpeza (Link) #}
                        <a href="{{ action.url }}" class="{{ action.class }}" id="btn-clear-search">
                            {% if action.icon %}<i class="{{ action.icon }}"></i>{% endif %} {{ action.label }}
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
        </form>
        {% endif %}
    </aside>

    <main class="apps-list-content" id="list-container">
        {% include "includes/partial_list_results.html" %}
    </main>

</div>
{% endblock content %}
